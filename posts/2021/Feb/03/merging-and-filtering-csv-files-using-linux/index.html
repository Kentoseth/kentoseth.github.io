
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="" name="robots"/>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&amp;family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&amp;display=swap" rel="stylesheet"/>
<link href="https://kentoseth.github.io/theme/stylesheet/style.min.css" rel="stylesheet" type="text/css"/>
<link href="https://kentoseth.github.io/theme/pygments/monokai.min.css" id="pygments-light-theme" rel="stylesheet" type="text/css"/>
<link href="https://kentoseth.github.io/theme/font-awesome/css/fontawesome.css" rel="stylesheet" type="text/css"/>
<link href="https://kentoseth.github.io/theme/font-awesome/css/brands.css" rel="stylesheet" type="text/css"/>
<link href="https://kentoseth.github.io/theme/font-awesome/css/solid.css" rel="stylesheet" type="text/css"/>
<link href="https://kentoseth.github.io/static/custom.css" rel="stylesheet"/>
<link href="https://kentoseth.github.io/feeds/all.atom.xml" rel="alternate" title="Kentoseth - Thoughts on programming, culture, FOSS and more Atom" type="application/atom+xml"/>
<!-- Chrome, Firefox OS and Opera -->
<meta content="#333333" name="theme-color"/>
<!-- Windows Phone -->
<meta content="#333333" name="msapplication-navbutton-color"/>
<!-- iOS Safari -->
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<!-- Microsoft EDGE -->
<meta content="#333333" name="msapplication-TileColor"/>
<meta content="Mohamed H." name="author">
<meta content="Using a bunch of Linux tools to merge multiple CSV files and then filter that merged file" name="description">
<meta content="linux, csv, awk, sed" name="keywords"/>
<meta content="Kentoseth - Thoughts on programming, culture, FOSS and more" property="og:site_name">
<meta content="Merging and Filtering CSV files using Linux" property="og:title">
<meta content="Using a bunch of Linux tools to merge multiple CSV files and then filter that merged file" property="og:description">
<meta content="en_US" property="og:locale">
<meta content="https://kentoseth.github.io/posts/2021/Feb/03/merging-and-filtering-csv-files-using-linux/" property="og:url"/>
<meta content="article" property="og:type"/>
<meta content="2021-02-03 02:00:00+02:00" property="article:published_time"/>
<meta content="" property="article:modified_time"/>
<meta content="https://kentoseth.github.io/author/mohamed-h.html" property="article:author"/>
<meta content="Linux" property="article:section">
<meta content="linux" property="article:tag"/>
<meta content="csv" property="article:tag"/>
<meta content="awk" property="article:tag"/>
<meta content="sed" property="article:tag"/>
<meta content="/images/avatar.jpg" property="og:image"/>
<title>Kentoseth - Thoughts on programming, culture, FOSS and more â€“ Merging and Filtering CSV files using Linux</title>
</meta></meta></meta></meta></meta></meta></meta><link href="https://kentoseth.github.io/posts/2021/Feb/03/merging-and-filtering-csv-files-using-linux/" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Kentoseth - Thoughts on programming, culture, FOSS and more", "item": "https://kentoseth.github.io"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://kentoseth.github.io/posts"}, {"@type": "ListItem", "position": 3, "name": "2021", "item": "https://kentoseth.github.io/posts/2021"}, {"@type": "ListItem", "position": 4, "name": "Feb", "item": "https://kentoseth.github.io/posts/2021/Feb"}, {"@type": "ListItem", "position": 5, "name": "03", "item": "https://kentoseth.github.io/posts/2021/Feb/03"}, {"@type": "ListItem", "position": 6, "name": "Merging and filtering csv files using linux", "item": "https://kentoseth.github.io/posts/2021/Feb/03/merging-and-filtering-csv-files-using-linux"}, {"@type": "ListItem", "position": 7, "name": "Index", "item": "https://kentoseth.github.io/posts/2021/Feb/03/merging-and-filtering-csv-files-using-linux/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Mohamed H."}, "publisher": {"@type": "Organization", "name": "Kentoseth - Thoughts on programming, culture, FOSS and more"}, "headline": "Merging and Filtering CSV files using Linux", "about": "Linux", "datePublished": "2021-02-03 02:00"}</script></head>
<body class="light-theme">
<aside>
<div>
<a href="https://kentoseth.github.io">
<img alt="Kentoseth" src="/images/avatar.jpg" title="Kentoseth"/>
</a>
<h1>
<a href="https://kentoseth.github.io">Kentoseth</a>
</h1>
<p>Coding. Culture. Linux. More.</p>
<nav>
<ul class="list">
<li>
<a href="https://kentoseth.github.io/pages/about-me/" target="_self">
                  About me
                </a>
</li>
<li>
<a href="https://kentoseth.github.io/pages/projects/" target="_self">
                  Projects
                </a>
</li>
<li>
<a href="mailto:kentoseth@devcroo.com?Subject=Blog%20Hello%20there" target="_self">Email</a>
</li>
<li>
<a href="/categories.html" target="_self">Categories</a>
</li>
</ul>
</nav>
<form action="https://tinyletter.com/Kentoseth" method="post" onsubmit="window.open('https://tinyletter.com/Kentoseth', 'popupwindow', 
        'scrollbars=yes,width=800,height=600');return true" style="border:1px solid #ccc;padding:3px;text-align:center;" target="popupwindow">
<p><label for="tlemail">Join my Newsletter</label></p>
<p><input id="tlemail" name="email" style="width:140px" type="text"/></p>
<input name="embed" type="hidden" value="1"/>
<input type="submit" value="Subscribe"/>
<p><a href="https://tinyletter.com" rel="noopener noreferrer" target="_blank">powered by TinyLetter</a></p>
</form>
<ul class="social">
<li>
<a class="sc-github-alt" href="https://github.com/Kentoseth" target="_blank">
<i class="fab fa-github-alt"></i>
</a>
</li>
<li>
<a class="sc-gitlab" href="https://gitlab.com/Kentoseth" target="_blank">
<i class="fab fa-gitlab"></i>
</a>
</li>
<li>
<a class="sc-envelope" href="mailto:kentoseth@devcroo.com?Subject=Blog%20Hello%20there" target="_blank">
<i class="fas fa-envelope"></i>
</a>
</li>
<li>
<a class="sc-rss" href="https://kentoseth.tk/feeds/all.atom.xml" target="_blank">
<i class="fas fa-rss"></i>
</a>
</li>
<li>
<a class="sc-mastodon" href="https://fosstodon.org/@kentoseth" rel="me" target="_blank">
<i class="fab fa-mastodon"></i>
</a>
</li>
</ul>
</div>
</aside>
<main>
<nav>
<a href="https://kentoseth.github.io">Home</a>
<a href="/categories">Categories</a>
<a href="/tags">Tags</a>
<a href="https://kentoseth.github.io/feeds/all.atom.xml">Atom</a>
</nav>
<article class="single">
<header>
<h1 id="merging-and-filtering-csv-files-using-linux">Merging and Filtering CSV files using Linux</h1>
<p>
      Posted on Wed 03 February 2021 in <a href="https://kentoseth.github.io/category/linux.html">Linux</a>
</p>
</header>
<div>
<p>I recently ran into a problem after downloading multiple CSV files. I wanted to firstly merge all those files and then extract/filter data from that merged file. Doing this is possible using code, but Linux has a bunch of powerful tools that can also handle such tasks and can do them very quickly(in comparison to Python).</p>
<p>Let us say we have a bunch of CSV files labelled like so: data_1.csv, data_2.csv and so on</p>
<h3>Merging</h3>
<p>In order to merge[1] all these CSV files, we can use <code>sed</code>:</p>
<div class="highlight"><pre><span></span><code>sed 1d data-*.csv &gt; merged.csv
</code></pre></div>
<p>The command collects all the data- files and after merging them, saves them to <code>merged.csv</code>. From the reference article I learned that if you used <code>*.csv</code> it may also merge the <code>merged.csv</code> file and create duplicates and other issues.</p>
<h3>Filtering - exact match</h3>
<p>In order to find an exact entry in the CSV file, we can use <code>awk</code>[2]:</p>
<div class="highlight"><pre><span></span><code>awk -F"," '$1==somestring' merged.csv
</code></pre></div>
<p>The <code>","</code> tells <code>awk</code> to view the comma as a separator. The <code>$1</code> says to look in the first column. <code>somestring</code> is the exact match we are looking for in column 1. <code>merged.csv</code> is the file we want to look into for the value.</p>
<h3>Filtering - partial strings</h3>
<p>My main filtering goal was to use partial strings to find certain values that match the partial string. Again we will use <code>awk</code>[3]:</p>
<div class="highlight"><pre><span></span><code>awk 'index($1, "partialstring")' merged.csv
</code></pre></div>
<p>Similar to the above, <code>$1</code> looks in column 1 for the <code>"partialstring"</code> string. In both the <code>awk</code> commands you can also save the output to a file like so:</p>
<p><code>awk 'index($1, "partialstring")' merged.csv &gt; output.txt</code></p>
<p>I hope these 3 commands help you save a lot of time if you are attempting to do anything with CSV files.</p>
<p>Sources:</p>
<p><a href="https://blog.softhints.com/how-to-merge-multiple-csv-files-with-python/">1 - https://blog.softhints.com/how-to-merge-multiple-csv-files-with-python/</a></p>
<p><a href="https://stackoverflow.com/questions/2373885/searching-a-csv-file-using-grep">2 - https://stackoverflow.com/questions/2373885/searching-a-csv-file-using-grep</a></p>
<p><a href="https://stackoverflow.com/questions/17001849/awk-partly-string-match-if-column-word-partly-matches">3 - https://stackoverflow.com/questions/17001849/awk-partly-string-match-if-column-word-partly-matches</a></p>
</div>
<div class="tag-cloud">
<p>
<a href="https://kentoseth.github.io/tag/linux.html">linux</a>
<a href="https://kentoseth.github.io/tag/csv.html">csv</a>
<a href="https://kentoseth.github.io/tag/awk.html">awk</a>
<a href="https://kentoseth.github.io/tag/sed.html">sed</a>
</p>
</div>
<hr/>
<h3>If you don't know how to use RSS and want email updates on my new content, consider
         <a href="https://tinyletter.com/Kentoseth" rel="noopener noreferrer" target="_blank">
          Joining my Newsletter</a></h3>
<p><em>The original content of this blog is a Waqf solely for the Pleasure of Allah. You are hereby granted full permission to copy, download, distribute, publish and share this content without modification under condition that full attribution is given to this author by creating a link either above or below the content that links back to the original source of the content. For any questions or ambiguity, you are requested to contact me via email for clarification.</em></p>
</article>
<footer>
<p>Â© 2023 </p>
<p>
Built with <a href="https://getpelican.com" target="_blank">Pelican</a> using <a href="https://github.com/alexandrevicenzi/Flex" target="_blank">Flex</a> theme
</p> </footer>
</main>
<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Kentoseth - Thoughts on programming, culture, FOSS and more ",
  "url" : "https://kentoseth.github.io",
  "image": "/images/avatar.jpg",
  "description": "Content focused on Islam, Islamic Studies, Languages, Linux, FOSS, infosec and culture"
}
</script>
</body>
</html>